<!DOCTYPE html>
  
<html lang="en">
  
<head>
  
    <meta charset="UTF-8">
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Camera Feed - Classroom AI Analysis</title>
  

  
    <!-- Bootstrap CSS -->
  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  

  
    <!-- Font Awesome Icons -->
  
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  

  
    <style>
  
        body {
  
            font-family: 'Roboto', sans-serif;
  
            background-color: #f8f9fa;
  
            color: #212529;
  
            line-height: 1.6;
  
        }
  

  
        /* üîù Top Navigation */
  
        .top-navbar {
  
            width: 100%;
  
            background-color: #212529;
  
            color: white;
  
            padding: 15px 20px;
  
            position: fixed;
  
            top: 0;
  
            left: 0;
  
            z-index: 1000;
  
            display: flex;
  
            align-items: center;
  
            justify-content: space-between;
  
        }
  

  
        .top-navbar .logo {
  
            font-size: 1.5rem;
  
            font-weight: bold;
  
            color: #007bff;
  
        }
  

  
        /* üìÇ Sidebar */
  
        .side-nav {
  
            position: fixed;
  
            top: 60px;
  
            left: 0;
  
            width: 250px;
  
            height: calc(100% - 60px);
  
            background-color: #212529;
  
            padding-top: 20px;
  
        }
  

  
        .side-nav a {
  
            display: block;
  
            color: white;
  
            padding: 15px 20px;
  
            text-decoration: none;
  
            font-size: 1.1rem;
  
        }
  

  
        .side-nav a.active, .side-nav a:hover {
  
            background-color: #007bff;
  
            color: white;
  
        }
  

  
        /* üìå Main Content */
  
        .main-content {
  
            margin-top: 70px;
  
            margin-left:var(--sidebar-w);
  
            padding: 20px;
  
        }
  

  
        /* üé• Live Camera Feed */
  
        .video-container {
  
            position: relative;
  
            display: flex;
  
            justify-content: center;
  
            align-items: center;
  
        }
  

  
        video, canvas {
  
            border-radius: 10px;
  
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  
            width: 60%;
  
            max-width: 800px;
  
        }
  

  
        canvas {
  
            position: absolute;
  
            pointer-events: none;
  
        }
  

  
        /* üéØ Attention & Noise Meters */
  
        .meter-container {
  
            display: flex;
  
            flex-direction: column;
  
            justify-content: center;
  
            align-items: center;
  
            width: 35%;
  
            margin-left: 20px;
  
        }
  

  
        .meter {
  
            width: 80%;
  
            height: 20px;
  
            background: #e9ecef;
  
            border-radius: 10px;
  
            position: relative;
  
            overflow: hidden;
  
            margin: 15px 0;
  
        }
  

  
        .meter-fill {
  
            height: 100%;
  
            width: 0%;
  
            background: #28a745;
  
            transition: width 0.3s ease-in-out;
  
        }
  

  
        /* üîä Noise Meter in Red */
  
        #noiseMeter {
  
            background: #dc3545;
  
        }
  

  
        /* üì¢ Footer */
  
        .footer {
  
            width: 100%;
  
            background-color: #212529;
  
            color: white;
  
            text-align: center;
  
            padding: 15px;
  
            position: fixed;
  
            bottom: 0;
  
            left: 0;
  
        }
  
    </style>
  
</head>
  
<body>
  

  
    <!-- üîπ Top Navigation -->
  
    <header class="top-navbar">
  
        <div class="logo">Classroom AI Analysis</div>
  
        <div class="nav-icons">
  
            <a href="index.html" class="btn btn-outline-light"><i class="fas fa-home"></i> Home</a>
  
        </div>
  
    </header>
  

  
    <!-- üîπ Sidebar -->
  
    <aside class="side-nav">
  
        <a href="index.html"><i class="fas fa-home"></i> Dashboard</a>
  
        <a href="livefeed.html"><i class="fas fa-video"></i> Video Processing</a>
  
        <a href="statistics.html"><i class="fas fa-chart-line"></i> Statistics</a>
  
        <a href="camerafeed.html" class="active"><i class="fas fa-camera"></i> Camera Feed</a>
  
        <a href="settings.html"><i class="fas fa-cogs"></i> Settings</a>
  
    </aside>
  

  
    <!-- üîπ Main Content -->
  
    <main class="main-content">
  
        <h1 class="mb-4 text-center">üì° AI Live Camera Feed</h1>
  

  
        <!-- üìå Start Camera Button -->
  
        <div class="text-center mb-4">
  
            <button id="startCameraBtn" class="btn btn-primary"><i class="fas fa-video"></i> Start Camera</button>
  
        </div>
  

  
        <!-- üìå Live Camera & AI Overlay -->
  
        <div class="d-flex">
  
            <div class="video-container">
  
                <video id="cameraVideo" autoplay muted playsinline></video>
  
                <canvas id="overlayCanvas"></canvas>
  
            </div>
  

  
            <!-- üìä Attention & Noise Meters -->
  
            <div class="meter-container">
  
                <h5>üéØ Class Attention</h5>
  
                <div class="meter"><div id="attentionMeter" class="meter-fill"></div></div>
  

  
                <h5>üîä Noise Level</h5>
  
                <div class="meter"><div id="noiseMeter" class="meter-fill"></div></div>
  
            </div>
  
        </div>
  
    </main>
  

  
    <!-- üîπ Footer -->
  
    <footer class="footer">
  
        <p>&copy; 2025 Classroom AI Analysis. All rights reserved.</p>
  
    </footer>
  

  
    <!-- TensorFlow & AI Models -->
  
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
  

  
    <script>
  
        document.addEventListener("DOMContentLoaded", async function () {
  
            const startCameraBtn = document.getElementById("startCameraBtn");
  
            const videoElement = document.getElementById("cameraVideo");
  
            const overlayCanvas = document.getElementById("overlayCanvas");
  
            const ctx = overlayCanvas.getContext("2d");
  
            const attentionMeter = document.getElementById("attentionMeter");
  
            const noiseMeter = document.getElementById("noiseMeter");
  

  
            let model = await cocoSsd.load();
  
            console.log("‚úÖ AI Model Loaded");
  

  
            startCameraBtn.addEventListener("click", async function () {
  
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
  
                videoElement.srcObject = stream;
  

  
                videoElement.onloadedmetadata = function () {
  
                    overlayCanvas.width = videoElement.videoWidth;
  
                    overlayCanvas.height = videoElement.videoHeight;
  
                    analyzeFrame();
  
                };
  

  
                // üé§ Start Noise Level Monitoring
  
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  
                const microphone = audioContext.createMediaStreamSource(stream);
  
                const analyser = audioContext.createAnalyser();
  
                analyser.fftSize = 256;
  
                const dataArray = new Uint8Array(analyser.frequencyBinCount);
  
                microphone.connect(analyser);
  

  
                function checkNoiseLevel() {
  
                    analyser.getByteFrequencyData(dataArray);
  
                    let noiseLevel = Math.max(...dataArray) / 2;
  
                    noiseMeter.style.width = `${noiseLevel}%`;
  
                    requestAnimationFrame(checkNoiseLevel);
  
                }
  
                checkNoiseLevel();
  
            });
  

  
            function analyzeFrame() {
  
                if (!videoElement.srcObject) return;
  

  
                model.detect(videoElement).then(predictions => {
  
                    ctx.clearRect(0, 0, overlayCanvas.width, overlayCanvas.height);
  
                    
  
                    let totalAttention = 0;
  
                    let studentCount = 0;
  

  
                    predictions.forEach(prediction => {
  
                        if (prediction.class === "person") {
  
                            studentCount++;
  
                            let attentionScore = Math.round(prediction.score * 100);
  
                            totalAttention += attentionScore;
  

  
                            ctx.strokeStyle = "green";
  
                            ctx.lineWidth = 4;
  
                            ctx.strokeRect(...prediction.bbox);
  
                            ctx.fillStyle = "green";
  
                            ctx.font = "bold 18px Arial";
  
                            ctx.fillText(`Attention: ${attentionScore}%`, prediction.bbox[0], prediction.bbox[1] - 10);
  
                        }
  
                    });
  

  
                    attentionMeter.style.width = `${studentCount ? totalAttention / studentCount : 0}%`;
  
                    requestAnimationFrame(analyzeFrame);
  
                });
  
            }
  
        });
  
    </script>
  

  
</body>
  
</html>  